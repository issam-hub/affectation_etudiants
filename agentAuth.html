<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./agentAuth.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400;1,700&display=swap"
    rel="stylesheet" />
  <title>Authentification</title>
</head>

<body>
  <div class="header">
    <a href="agentChoices.html"><img src="./imgs/logo.svg" alt="logo" /></a>
  </div>

  <div class="div1">
    <div class="title">
      <h1>Authentification</h1>
      <p>fill out your informations</p>
    </div>
    <form action="session_auth.php" method="get">
      <div class="info">
        <label>Username: </label>
        <input placeholder="admin" type="text" name="agent_name" id="agent_name" pattern="[a-zA-Z]+" required />
      </div>
      <div class="info">
        <label>Code:</label>
        <input placeholder="admin" type="text" name="agent_code" id="agent_code" required />
      </div>
      <button type="submit">submit</button>
      <p id="err" style="display: none;"></p>
    </form>
  </div>
  <script src="agentAuth.js"></script>
  <script>
    /* start redirect admin to choices page if he's already logged in */

    (async function () {
      let r = await fetch("session_auth.php");
      console.log(r);
      if (r.statusText == "already_logged_in")
        location.href = "agentChoices.html";
    })();

    /* end redirect admin to choices page if he's already logged in */
  </script>
</body>

</html>